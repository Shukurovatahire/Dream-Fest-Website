import{r as n,d as B,j as e,O as S,Q as f,A as v}from"./vendor-VF7iyE7l.js";import{a as D,H as J,l as q,g as M}from"./index-Duve82Pp.js";import{B as y}from"./Button-BOGBLznd.js";const _=()=>{JSON.parse(localStorage.getItem("allUsers")||"[]");const[C,w]=n.useState(""),[H,I]=n.useState(""),[c,F]=n.useState(""),[o,U]=n.useState(!1),[m,b]=n.useState(""),[l,i]=n.useState(""),[d,u]=n.useState(!1),p=B(),g=D(),h=()=>{u(!d)},x=()=>{U(!o)},E=(s,r,t)=>{const a=new Date;a.setTime(a.getTime()+t*60*60*1e3);const O="expires="+a.toUTCString();document.cookie=s+"="+r+";"+O+";path=/"},P=()=>{setTimeout(()=>{localStorage.removeItem("currentUser"),document.cookie="authToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",p("/login")},6*60*60*1e3)},T=s=>{const r=/[A-Z]/.test(s);return/\d/.test(s)&&r},j=s=>{b(s.target.value),I(s.target.value)},k=s=>{w(s.target.value)},N=s=>{F(s.target.value)},L=s=>{s.preventDefault(),T(m)?i(""):i("Password must contain at least one uppercase letter and one number.");const r=JSON.parse(localStorage.getItem("allUsers")||"[]");if(r.some(a=>a.email===c))i("User already exists.");else{const a={username:C,email:c,password:m,userId:v(),cart:[]};r.push(a),localStorage.setItem("allUsers",JSON.stringify(r)),u(!0),alert("Registration successful!")}},A=s=>{s.preventDefault();const t=JSON.parse(localStorage.getItem("allUsers")||"[]").find(a=>a.email===c);if(t&&t.password===m){E("authToken",v(),6),alert("Login successful!"),console.log(t),localStorage.setItem("currentUser",JSON.stringify(t));const a=JSON.parse(localStorage.getItem(`currentUserCart_${t.userId}`)||"[]");Array.isArray(a)&&g(q(a)),g(M(t)),P(),p("/cart")}else i("Invalid email or password.")};return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"loginSection",children:[e.jsx(J,{}),e.jsxs("div",{className:"loginContainer",children:[e.jsx("div",{className:"photoPart",children:e.jsx("img",{src:"https://preview.colorlib.com/theme/bootstrap/login-form-07/images/undraw_remotely_2j6y.svg",alt:""})}),e.jsx("div",{className:"generalBox",children:d?e.jsxs("div",{className:"singIn",children:[e.jsx("div",{className:"ifHaveAcconut",children:e.jsxs("p",{children:["Don't have an account?",e.jsx("span",{onClick:h,style:{color:"#6C63FF",cursor:"pointer",marginLeft:"3px"},children:"Sing up"})]})}),e.jsx("h2",{children:"Welcome to Dream Fest"}),e.jsxs("p",{style:{color:"#6C63FF",fontWeight:"bold",fontSize:"25px"},children:["Sing",e.jsx("span",{style:{color:"white",fontWeight:"normal",marginLeft:"3px"},children:"in"})]}),e.jsx("div",{className:"loginFormm",children:e.jsxs("form",{className:"loginForm",onSubmit:A,children:[e.jsxs("label",{className:"eyeInput",children:[e.jsx("span",{className:"lSpan",children:"Password"}),e.jsx("div",{className:"passwordIcon",onClick:x,children:o?e.jsx(S,{className:"eyeIcon"}):e.jsx(f,{className:"eyeIcon"})}),e.jsx("input",{required:!0,type:o?"text":"password",onChange:j}),l&&e.jsx("p",{className:"errorMesage",style:{color:"red",fontSize:"12px",marginTop:"5px"},children:l})]}),e.jsxs("label",{children:[e.jsx("span",{className:"lSpan",children:"Email"}),e.jsx("input",{type:"email",required:!0,onChange:N})]}),e.jsx("div",{className:"registerButtons",children:e.jsx(y,{text:"Sing In",bgColor:"#6C63FF",color:"white",className:"loginBtn"})})]})})]}):e.jsxs("div",{className:"partForm",children:[e.jsx("div",{className:"ifHaveAcconut",children:e.jsxs("p",{children:["Already have an account ?",e.jsx("span",{onClick:h,style:{color:"#6C63FF",cursor:"pointer",marginLeft:"3px"},children:"Sing in"})]})}),e.jsx("h2",{children:"Welcome to Dream Fest"}),e.jsx("p",{children:"Register your account"}),e.jsx("div",{className:"loginFormm",children:e.jsxs("form",{className:"loginForm",onSubmit:L,children:[e.jsxs("label",{children:[e.jsx("span",{className:"lSpan",children:"Username"}),e.jsx("input",{type:"text",required:!0,onChange:k})]}),e.jsxs("label",{className:"eyeInput",children:[e.jsx("span",{className:"lSpan",children:"Password"}),e.jsx("div",{className:"passwordIcon",onClick:x,children:o?e.jsx(S,{className:"eyeIcon"}):e.jsx(f,{className:"eyeIcon"})}),e.jsx("input",{required:!0,type:o?"text":"password",onChange:j}),l&&e.jsx("p",{className:"errorMesage",style:{color:"red",fontSize:"12px",marginTop:"5px"},children:l})]}),e.jsxs("label",{children:[e.jsx("span",{className:"lSpan",children:"Email"}),e.jsx("input",{type:"email",required:!0,onChange:N})]}),e.jsx("div",{className:"registerButtons",children:e.jsx(y,{text:"Login",bgColor:"#6C63FF",color:"white",className:"loginBtn"})})]})})]})})]})]})})};export{_ as default};
