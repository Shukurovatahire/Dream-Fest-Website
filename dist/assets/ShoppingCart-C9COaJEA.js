import{U as B,Y as D,V as h,r as c,N as P,j as e,K as U,L as _,a2 as E,a3 as A,a4 as M,M as O,a5 as Q,a6 as f}from"./AllArtists-eN8-0vPH.js";import{B as L,s as W}from"./Concerts-DiTnYv2f.js";import{v as V}from"./Login-_kDGnBSY.js";import"./ConcertDetails-DdZrJiCE.js";const z=(r,d)=>{const l=r.lastIndexOf(d);return l!==-1?r.substring(0,l):r},J=r=>new Date(r).toLocaleDateString("en-US"),Y=()=>{const r=B(),d=D(),l=h(s=>s.cart.items||[]),m=h(s=>s.cart.totalPrice),[p,b]=c.useState(""),[S,u]=c.useState(null);h(s=>s.user.isAuthenticated);const[i,x]=c.useState({name:"",surname:"",email:"",mobile:""}),[j,g]=c.useState([]),[v,y]=c.useState(!1),k=s=>{r(Q(s)),W.success({message:t("shoppingCart.deletedFromCart"),className:"notificationCustom",duration:1,description:t("shoppingCart.deletedFromCartDescription")})};c.useEffect(()=>{const s=localStorage.getItem("currentUser");s&&x(JSON.parse(s))},[]);const C=s=>{const a=s.target.value;b(a==="electron"?"Electronic ticket or voucher":"At sales points")},q=JSON.parse(localStorage.getItem("currentUser")||"{}");console.log("Current User1:",q);const F=JSON.parse(localStorage.getItem("allUsers")||"[]");console.log("alllUsers",F);const N=s=>{u(s),y(!0)};c.useEffect(()=>{let s;return v&&(s=window.setTimeout(()=>{y(!1),u(null)},4e3)),()=>{window.clearTimeout(s)}},[v]);const I=s=>{const a=V();s.preventDefault(),r(f(i));const n=[];i.name||n.push("Name is required."),i.surname||n.push("Surname is required."),(!i.mobile||isNaN(Number(i.mobile)))&&n.push("Valid mobile number is required."),(!i.email||!/\S+@\S+\.\S+/.test(i.email))&&n.push("Valid email is required."),n.length>0?g(n):(g([]),r(f(i)),d(`/order/${a}`))},o=s=>{const{name:a,value:n}=s.target,T=a==="email"?n.toLowerCase():n;x(w=>({...w,[a]:T}))},{t}=P();return console.log(l),e.jsx(e.Fragment,{children:e.jsxs("section",{className:"cartContainer",children:[e.jsx("div",{children:e.jsx(U,{})}),e.jsxs("div",{className:"cartWrapper",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"cartTitle",children:t("shoppingCart.title")}),e.jsx(_,{})]}),e.jsxs("div",{className:"tickestAndPaymentBox",children:[e.jsxs("div",{className:"cartBox",children:[e.jsx("h4",{className:"yourCart",children:t("shoppingCart.yourCart")}),e.jsx("div",{className:"yourTickets",children:l.length===0?e.jsx("p",{style:{fontSize:"20px",fontWeight:"500",color:"rgb(103 103 103)"},children:t("shoppingCart.cartEmpty")}):e.jsxs("div",{className:"itemMapBox",children:[l.map((s,a)=>e.jsxs("div",{children:[e.jsxs("div",{className:"ticketFlexBox",children:[e.jsx("div",{children:e.jsxs("div",{className:"arrayBox",children:[e.jsx("img",{src:"https://i.guim.co.uk/img/media/0d961031d7d7da69525fef264d5a8d81235bcb5b/0_0_7182_4309/master/7182.jpg?width=1200&height=1200&quality=85&auto=format&fit=crop&s=d453cfeacf206882f14f6e4beec7f509",className:"cardImage"}),e.jsxs("div",{className:"textArrBox",children:[e.jsx("p",{style:{fontWeight:"500",maxWidth:"280px"},children:z(s.name," at ")}),e.jsxs("p",{children:[J(s.endDate)," , 20:00"]}),e.jsx("div",{className:"price",children:e.jsx("p",{style:{margin:"0"},children:"35$"})})]})]})}),e.jsxs("div",{className:"addTicket",children:[S===a?e.jsxs("div",{className:"increaseQuantity",children:[e.jsx("div",{className:"decrease",onClick:()=>r(E(s.concert_id)),children:"-"}),e.jsx("p",{className:"incP",onClick:()=>N(a),children:s.quantity}),e.jsx("div",{className:" increase",onClick:()=>r(A(s.concert_id)),children:"+"})]}):e.jsx("div",{className:"quantity",onClick:()=>N(a),children:e.jsx("p",{children:s.quantity})}),e.jsx("div",{className:"removeButton",onClick:()=>k(s.concert_id),children:e.jsx(M,{})})]})]}),a<l.length-1&&e.jsx("hr",{style:{marginTop:"2rem",height:"0.5px",backgroundColor:"lightgrey",border:"none"}})]},s.concert_id)),e.jsxs("div",{className:"deliveryConatiner",children:[e.jsx("h1",{children:t("shoppingCart.chooseDeliveryMethod")}),e.jsxs("div",{className:"boxFlexx",children:[e.jsxs("div",{children:[e.jsx("input",{type:"radio",id:"electron",name:"deliveyMethod",value:"electron",onChange:C}),e.jsxs("label",{className:"deliveryLabel",htmlFor:"electron",children:[e.jsx("img",{src:"https://cdn.iticket.az/icons/delivery_methods/1.svg"}),e.jsx("span",{className:"spn",children:t("shoppingCart.electronicTicket")})]})]}),e.jsxs("div",{children:[e.jsx("input",{type:"radio",id:"sales",name:"deliveyMethod",value:"sales",onChange:C}),e.jsxs("label",{className:"deliveryLabel",htmlFor:"sales",children:[e.jsx("img",{src:"https://cdn.iticket.az/icons/delivery_methods/3.svg"}),e.jsx("span",{className:"spn",children:t("shoppingCart.atSalesPoints")})]})]})]})]})]})})]}),e.jsxs("div",{className:"payment",children:[e.jsx("h4",{className:"paymetTitle",children:t("shoppingCart.deliveryMethod")}),e.jsx("h3",{style:{fontWeight:"600"},children:p||t("shoppingCart.electronicTicket2")}),e.jsxs("form",{className:"myForm",onSubmit:I,children:[e.jsx("h4",{className:"paymetTitle",style:{marginBottom:"-5px"},children:t("shoppingCart.userInformation")}),j.length>0&&e.jsx("div",{style:{color:"red"},children:j.map((s,a)=>e.jsx("p",{children:s},a))}),e.jsx("input",{type:"text",required:!0,placeholder:t("Contact.form.namePlaceholder"),name:"name",onChange:o}),e.jsx("input",{type:"text",required:!0,placeholder:t("Contact.form.surnamePlaceholder"),name:"surname",onChange:o}),e.jsx("input",{type:"tel",name:"mobile",id:"",required:!0,placeholder:t("Contact.form.mobilePlaceholder"),onChange:o}),e.jsx("input",{type:"email",name:"email",value:i.email,required:!0,placeholder:t("Contact.form.emailPlaceholder"),onChange:o}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("p",{className:"totalPrice",children:t("shoppingCart.total")}),m===0?"":e.jsxs("span",{className:"totalNum",children:[m,"$"]})]}),e.jsxs("div",{className:"checkBoxContainer",children:[e.jsx("input",{type:"checkbox",name:"",id:"",required:!0,style:{height:"20px",width:"20px"}}),e.jsx("p",{children:t("shoppingCart.acceptTerms")})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"1rem"},children:e.jsx(L,{text:t("shoppingCart.createOrder"),bgColor:"rgb(253, 53, 90)",color:"white",className:"resBtn2",disabled:m===0})})]})]})]})]}),e.jsx(O,{})]})})};export{Y as default};
