import{G as z,f as A,b as D,j as e,H as J,I as f,t as O,v as q}from"./index-kfkMgta7.js";import{B as v}from"./Button-BqwqmxVt.js";import{r as n}from"./vendor-Birv9qIL.js";import{v as y}from"./v4-DvF23Exx.js";function w(c){return z({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.1 144.8c56.2 0 101.9 45.3 101.9 101.1 0 13.1-2.6 25.5-7.3 37l59.5 59c30.8-25.5 55-58.4 69.9-96-35.3-88.7-122.3-151.6-224.2-151.6-28.5 0-55.8 5.1-81.1 14.1l44 43.7c11.6-4.6 24.1-7.3 37.3-7.3zM52.4 89.7l46.5 46.1 9.4 9.3c-33.9 26-60.4 60.8-76.3 100.8 35.2 88.7 122.2 151.6 224.1 151.6 31.6 0 61.7-6.1 89.2-17l8.6 8.5 59.7 59 25.9-25.7L78.2 64 52.4 89.7zM165 201.4l31.6 31.3c-1 4.2-1.6 8.7-1.6 13.1 0 33.5 27.3 60.6 61.1 60.6 4.5 0 9-.6 13.2-1.6l31.6 31.3c-13.6 6.7-28.7 10.7-44.8 10.7-56.2 0-101.9-45.3-101.9-101.1 0-15.8 4.1-30.7 10.8-44.3zm87.8-15.7l64.2 63.7.4-3.2c0-33.5-27.3-60.6-61.1-60.6l-3.5.1z"},child:[]}]})(c)}const V=()=>{JSON.parse(localStorage.getItem("allUsers")||"[]");const[c,C]=n.useState(""),[H,I]=n.useState(""),[m,F]=n.useState(""),[o,b]=n.useState(!1),[d,U]=n.useState(""),[l,i]=n.useState(""),[u,p]=n.useState(!1),g=A(),h=D(),x=()=>{p(!u)},j=()=>{b(!o)},E=(s,r,t)=>{const a=new Date;a.setTime(a.getTime()+t*60*60*1e3);const M="expires="+a.toUTCString();document.cookie=s+"="+r+";"+M+";path=/"},P=()=>{setTimeout(()=>{localStorage.removeItem("currentUser"),document.cookie="authToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",g("/login")},6*60*60*1e3)},L=s=>{const r=/[A-Z]/.test(s);return/\d/.test(s)&&r},N=s=>{U(s.target.value),I(s.target.value)},T=s=>{C(s.target.value)},S=s=>{F(s.target.value)},k=s=>{s.preventDefault(),L(d)?i(""):i("Password must contain at least one uppercase letter and one number.");const r=JSON.parse(localStorage.getItem("allUsers")||"[]");if(r.some(a=>a.email===m))i("User already exists.");else{const a={username:c,email:m,password:d,userId:y(),cart:[]};r.push(a),localStorage.setItem("allUsers",JSON.stringify(r)),p(!0),alert("Registration successful!")}},B=s=>{s.preventDefault();const t=JSON.parse(localStorage.getItem("allUsers")||"[]").find(a=>a.email===m);if(t&&t.password===d){E("authToken",y(),6),alert("Login successful!"),console.log(t),localStorage.setItem("currentUser",JSON.stringify(t));const a=JSON.parse(localStorage.getItem(`currentUserCart_${t.userId}`)||"[]");Array.isArray(a)&&h(O(a)),h(q(t)),P(),g("/cart")}else i("Invalid email or password.")};return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"loginSection",children:[e.jsx(J,{}),e.jsxs("div",{className:"loginContainer",children:[e.jsx("div",{className:"photoPart",children:e.jsx("img",{src:"https://preview.colorlib.com/theme/bootstrap/login-form-07/images/undraw_remotely_2j6y.svg",alt:""})}),e.jsx("div",{className:"generalBox",children:u?e.jsxs("div",{className:"singIn",children:[e.jsx("div",{className:"ifHaveAcconut",children:e.jsxs("p",{children:["Don't have an account?",e.jsx("span",{onClick:x,style:{color:"#6C63FF",cursor:"pointer",marginLeft:"3px"},children:"Sing up"})]})}),e.jsx("h2",{children:"Welcome to Dream Fest"}),e.jsxs("p",{style:{color:"#6C63FF",fontWeight:"bold",fontSize:"25px"},children:["Sing",e.jsx("span",{style:{color:"white",fontWeight:"normal",marginLeft:"3px"},children:"in"})]}),e.jsx("div",{className:"loginFormm",children:e.jsxs("form",{className:"loginForm",onSubmit:B,children:[e.jsxs("label",{className:"eyeInput",children:[e.jsx("span",{className:"lSpan",children:"Password"}),e.jsx("div",{className:"passwordIcon",onClick:j,children:o?e.jsx(f,{className:"eyeIcon"}):e.jsx(w,{className:"eyeIcon"})}),e.jsx("input",{required:!0,type:o?"text":"password",onChange:N}),l&&e.jsx("p",{className:"errorMesage",style:{color:"red",fontSize:"12px",marginTop:"5px"},children:l})]}),e.jsxs("label",{children:[e.jsx("span",{className:"lSpan",children:"Email"}),e.jsx("input",{type:"email",required:!0,onChange:S})]}),e.jsx("div",{className:"registerButtons",children:e.jsx(v,{text:"Sing In",bgColor:"#6C63FF",color:"white",className:"loginBtn"})})]})})]}):e.jsxs("div",{className:"partForm",children:[e.jsx("div",{className:"ifHaveAcconut",children:e.jsxs("p",{children:["Already have an account ?",e.jsx("span",{onClick:x,style:{color:"#6C63FF",cursor:"pointer",marginLeft:"3px"},children:"Sing in"})]})}),e.jsx("h2",{children:"Welcome to Dream Fest"}),e.jsx("p",{children:"Register your account"}),e.jsx("div",{className:"loginFormm",children:e.jsxs("form",{className:"loginForm",onSubmit:k,children:[e.jsxs("label",{children:[e.jsx("span",{className:"lSpan",children:"Username"}),e.jsx("input",{type:"text",required:!0,onChange:T})]}),e.jsxs("label",{className:"eyeInput",children:[e.jsx("span",{className:"lSpan",children:"Password"}),e.jsx("div",{className:"passwordIcon",onClick:j,children:o?e.jsx(f,{className:"eyeIcon"}):e.jsx(w,{className:"eyeIcon"})}),e.jsx("input",{required:!0,type:o?"text":"password",onChange:N}),l&&e.jsx("p",{className:"errorMesage",style:{color:"red",fontSize:"12px",marginTop:"5px"},children:l})]}),e.jsxs("label",{children:[e.jsx("span",{className:"lSpan",children:"Email"}),e.jsx("input",{type:"email",required:!0,onChange:S})]}),e.jsx("div",{className:"registerButtons",children:e.jsx(v,{text:"Login",bgColor:"#6C63FF",color:"white",className:"loginBtn"})})]})})]})})]})]})})};export{V as default};
